@model BestieToy.Models.User
@{
    ViewData["Title"] = "Thông tin tài khoản";
    ViewData["AdditionalCss"] = "profile";
}

<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="bg-light py-3">
    <div class="container">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Trang chủ</a></li>
            <li class="breadcrumb-item active" aria-current="page">Thông tin tài khoản</li>
        </ol>
    </div>
</nav>

<!-- Profile Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <!-- Sidebar Navigation -->
            <div class="col-lg-3 mb-4">
                <div class="card shadow-sm">
                    <div class="card-body p-3">
                        <div class="d-flex flex-column align-items-center text-center mb-4">
                            <div class="profile-avatar mb-3">
                                <i class="fas fa-user-circle fa-4x text-primary"></i>
                            </div>
                            <h5 class="mb-1">@Model.FullName</h5>
                            <p class="text-muted small mb-0">@Model.Email</p>
                            <span class="badge bg-primary mt-2">
                                @(Model.Role?.RoleName ?? "Customer")
                            </span>
                        </div>

                        <nav class="nav flex-column">
                            <a class="nav-link active" asp-controller="Profile" asp-action="Index">
                                <i class="fas fa-user me-2"></i>Thông tin cá nhân
                            </a>
                            <a class="nav-link" asp-controller="Profile" asp-action="Edit">
                                <i class="fas fa-edit me-2"></i>Cập nhật thông tin
                            </a>
                            <a class="nav-link" asp-controller="Profile" asp-action="ChangePassword">
                                <i class="fas fa-key me-2"></i>Đổi mật khẩu
                            </a>
                            <a class="nav-link" asp-controller="Order" asp-action="History">
                                <i class="fas fa-history me-2"></i>Lịch sử đơn hàng
                            </a>
                            <hr class="my-2">
                            <form asp-controller="Auth" asp-action="Logout" method="post">
                                <button type="submit" class="nav-link text-danger border-0 bg-transparent w-100 text-start">
                                    <i class="fas fa-sign-out-alt me-2"></i>Đăng xuất
                                </button>
                            </form>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0"><i class="fas fa-user-circle me-2"></i>Thông tin cá nhân</h4>
                    </div>
                    <div class="card-body">
                        <!-- Personal Info -->
                        <div class="row mb-4">
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-muted small">Họ và tên</label>
                                <div class="form-control-plaintext p-2 border rounded bg-light">
                                    @Model.FullName
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-muted small">Tên đăng nhập</label>
                                <div class="form-control-plaintext p-2 border rounded bg-light">
                                    @Model.Username
                                </div>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-muted small">Email</label>
                                <div class="form-control-plaintext p-2 border rounded bg-light">
                                    @Model.Email
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-muted small">Số điện thoại</label>
                                <div class="form-control-plaintext p-2 border rounded bg-light">
                                    @(Model.Phone ?? "Chưa cập nhật")
                                </div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label text-muted small">Địa chỉ</label>
                            <div class="form-control-plaintext p-2 border rounded bg-light">
                                @(Model.Address ?? "Chưa cập nhật")
                            </div>
                        </div>

                        <!-- Account Info -->
                        <div class="row mb-4">
                            <div class="col-md-4 mb-3">
                                <div class="info-card text-center p-3 border rounded">
                                    <i class="fas fa-calendar-alt fa-2x text-primary mb-2"></i>
                                    <p class="mb-1 small text-muted">Ngày tham gia</p>
                                    <p class="mb-0 fw-bold">@Model.CreatedAt.ToString("dd/MM/yyyy")</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="info-card text-center p-3 border rounded">
                                    <i class="fas fa-shopping-cart fa-2x text-primary mb-2"></i>
                                    <p class="mb-1 small text-muted">Tổng đơn hàng</p>
                                    <p class="mb-0 fw-bold">0 đơn</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="info-card text-center p-3 border rounded">
                                    <i class="fas fa-star fa-2x text-primary mb-2"></i>
                                    <p class="mb-1 small text-muted">Thành viên</p>
                                    <p class="mb-0 fw-bold">@(Model.Role?.RoleName ?? "Customer")</p>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-2">
                            <a asp-controller="Profile" asp-action="Edit" class="btn btn-primary">
                                <i class="fas fa-edit me-2"></i>Cập nhật thông tin
                            </a>
                            <a asp-controller="Profile" asp-action="ChangePassword" class="btn btn-outline-primary">
                                <i class="fas fa-key me-2"></i>Đổi mật khẩu
                            </a>
                            <a asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary ms-auto">
                                <i class="fas fa-home me-2"></i>Về trang chủ
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Recent Orders -->
                <div class="card shadow-sm mt-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="fas fa-history me-2"></i>Đơn hàng gần đây</h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center py-4">
                            <i class="fas fa-shopping-bag fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">Chưa có đơn hàng</h5>
                            <p class="text-muted">Bạn chưa mua sản phẩm nào</p>
                            <a asp-controller="Product" asp-action="Index" class="btn btn-primary">
                                <i class="fas fa-shopping-cart me-2"></i>Mua sắm ngay
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Styles {
    <style>
        /* Profile Page Styles */
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF6B35 0%, #4ECDC4 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .nav-link {
            padding: 0.75rem 1rem;
            color: #333;
            border-radius: 8px;
            margin-bottom: 0.25rem;
            transition: all 0.3s ease;
        }

            .nav-link:hover {
                background-color: rgba(255, 107, 53, 0.1);
                color: #FF6B35;
            }

            .nav-link.active {
                background-color: rgba(255, 107, 53, 0.15);
                color: #FF6B35;
                font-weight: 600;
            }

        .info-card {
            transition: transform 0.3s ease;
        }

            .info-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            }

        .form-control-plaintext {
            min-height: 45px;
            line-height: 1.5;
        }
    </style>
}